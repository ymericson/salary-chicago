library(htmltools)
library(here)
library(htmlwidgets)
# get and clean data
df_app <- read.socrata("https://data.cityofchicago.org/resource/n4bx-5kf6.json")
cols.num <- c("frequency_description", "annual_salary","hourly_rate")
df_app[cols.num] <- sapply(df_app[cols.num],as.numeric)
df_app$annual_salary <- ifelse(is.na(df_app$annual_salary),
df_app$frequency_description * df_app$hourly_rate * 50,
df_app$annual_salary)
df_app$name <- str_to_title(df_app$name)
df_app$department <- str_to_title(df_app$department)
df_app$job_titles <-gsub('^([0-9]+)|([IVXLCM]+)\\.?$','', df_app$job_titles)
df_app$job_titles <- str_replace_all(df_app$job_titles,
c("DIR" = "DIRECTOR",
"SUPVSR" = "SUPERVISOR",
"MGR" = "MANAGER"))
df_app$job_titles <- str_to_title(df_app$job_titles)
df_app$job_titles <- gsub("\\s*\\([^\\)]+\\)","",as.character(df_app$job_titles))
df_app <- df_app %>% select("name", "department", "job_titles", "annual_salary") %>%
mutate(department=recode(department,
"Admin Hearng" = "Administrative Hearings",
"Animal Contrl" = "Animal Control",
"Budget & Mgmt" = "Budget and Management",
"Copa" = "Civilian Office of Police Accountability",
"Dais" = "Assets, Info, and Services",
"Housing & Econ Dev" = "Planning and Development",
"Inspector Gen" = "Inspector General",
"License Appl Comm" = "License Appeal Commission",
"Oemc" = "Office of Emergency Mgmt and Comm",
"Police" = "Police Department",
"Streets & San" = "Streets and Sanitation",
"Transportn" = "Transportation",
"Water Mgmnt" = "Water Management"
)) %>%
dplyr::rename(
"Name" = name,
"Department" = department,
"Job" = job_titles,
"Salary" = annual_salary
)
df_app <- merge(df_app, count(df_app, Department), by="Department") %>%
arrange(Name)
df_app$deptFreq <- paste0(df_app$Department, " ", paste0("(",df_app$n,")"))
df_app <- df_app %>% select("name", "department", "job_titles", "annual_salary") %>%
mutate(department=recode(department,
"Admin Hearng" = "Administrative Hearings",
"Animal Contrl" = "Animal Control",
"Budget & Mgmt" = "Budget and Management",
"Copa" = "Civilian Office of Police Accountability",
"Dais" = "Assets, Info, and Services",
"Housing & Econ Dev" = "Planning and Development",
"Inspector Gen" = "Inspector General",
"License Appl Comm" = "License Appeal Commission",
"Oemc" = "Office of Emergency Mgmt and Comm",
"Police" = "Police Department",
"Streets & San" = "Streets and Sanitation",
"Transportn" = "Transportation",
"Water Mgmnt" = "Water Management"
)) %>%
dplyr::rename(
"Name" = name,
"Department" = department,
"Job" = job_titles,
"Salary" = annual_salary
)
df_app <- merge(df_app, count(df_app, Department), by="Department") %>%
arrange(Name)
# library
library(treemap)
library(d3treeR)
library(rjson)
library(RSocrata)
library(tools)
library(stringr)
library(dplyr)
library(tidyverse)
library(htmltools)
library(here)
library(htmlwidgets)
# get and clean data
df_app <- read.socrata("https://data.cityofchicago.org/resource/n4bx-5kf6.json")
cols.num <- c("frequency_description", "annual_salary","hourly_rate")
df_app[cols.num] <- sapply(df_app[cols.num],as.numeric)
df_app$annual_salary <- ifelse(is.na(df_app$annual_salary),
df_app$frequency_description * df_app$hourly_rate * 50,
df_app$annual_salary)
df_app$name <- str_to_title(df_app$name)
df_app$department <- str_to_title(df_app$department)
df_app$job_titles <-gsub('^([0-9]+)|([IVXLCM]+)\\.?$','', df_app$job_titles)
df_app$job_titles <- str_replace_all(df_app$job_titles,
c("DIR" = "DIRECTOR",
"SUPVSR" = "SUPERVISOR",
"MGR" = "MANAGER"))
df_app$job_titles <- str_to_title(df_app$job_titles)
df_app$job_titles <- gsub("\\s*\\([^\\)]+\\)","",as.character(df_app$job_titles))
df_app <- df_app %>% select("name", "department", "job_titles", "annual_salary") %>%
mutate(department=recode(department,
"Admin Hearng" = "Administrative Hearings",
"Animal Contrl" = "Animal Control",
"Budget & Mgmt" = "Budget and Management",
"Copa" = "Civilian Office of Police Accountability",
"Dais" = "Assets, Info, and Services",
"Housing & Econ Dev" = "Planning and Development",
"Inspector Gen" = "Inspector General",
"License Appl Comm" = "License Appeal Commission",
"Oemc" = "Office of Emergency Mgmt and Comm",
"Police" = "Police Department",
"Streets & San" = "Streets and Sanitation",
"Transportn" = "Transportation",
"Water Mgmnt" = "Water Management"
)) %>%
dplyr::rename(
"Name" = name,
"Department" = department,
"Job" = job_titles,
"Salary" = annual_salary
)
df_app <- merge(df_app, count(df_app, Department), by="Department") %>%
arrange(Name)
df_app$deptFreq <- paste0(df_app$Department, " ", paste0("(",df_app$n,")"))
runApp('C:/Users/ymeri/salary-treemap/app')
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
library(devtools)
shiny::runApp('C:/Users/ymeri/salary-treemap/app')
# library
library(treemap)
library(d3treeR)
library(rjson)
library(RSocrata)
library(tools)
library(stringr)
library(dplyr)
library(tidyverse)
library(htmltools)
library(here)
library(htmlwidgets)
# get and clean data
df_app <- read.socrata("https://data.cityofchicago.org/resource/n4bx-5kf6.json")
cols.num <- c("frequency_description", "annual_salary","hourly_rate")
df_app[cols.num] <- sapply(df_app[cols.num],as.numeric)
df_app$annual_salary <- ifelse(is.na(df_app$annual_salary),
df_app$frequency_description * df_app$hourly_rate * 50,
df_app$annual_salary)
df_app$name <- str_to_title(df_app$name)
df_app$department <- str_to_title(df_app$department)
df_app$job_titles <-gsub('^([0-9]+)|([IVXLCM]+)\\.?$','', df_app$job_titles)
df_app$job_titles <- str_replace_all(df_app$job_titles,
c("DIR" = "DIRECTOR",
"SUPVSR" = "SUPERVISOR",
"MGR" = "MANAGER"))
df_app$job_titles <- str_to_title(df_app$job_titles)
df_app$job_titles <- gsub("\\s*\\([^\\)]+\\)","",as.character(df_app$job_titles))
df_app <- df_app %>% select("name", "department", "job_titles", "annual_salary") %>%
mutate(department=recode(department,
"Admin Hearng" = "Administrative Hearings",
"Animal Contrl" = "Animal Control",
"Budget & Mgmt" = "Budget and Management",
"Copa" = "Civilian Office of Police Accountability",
"Dais" = "Assets, Info, and Services",
"Housing & Econ Dev" = "Planning and Development",
"Inspector Gen" = "Inspector General",
"License Appl Comm" = "License Appeal Commission",
"Oemc" = "Office of Emergency Mgmt and Comm",
"Police" = "Police Department",
"Streets & San" = "Streets and Sanitation",
"Transportn" = "Transportation",
"Water Mgmnt" = "Water Management"
)) %>%
dplyr::rename(
"Name" = name,
"Department" = department,
"Job" = job_titles,
"Salary" = annual_salary
)
df_app <- merge(df_app, count(df_app, Department), by="Department") %>%
arrange(Name)
df_app$deptFreq <- paste0(df_app$Department, " ", paste0("(",df_app$n,")"))
runApp('C:/Users/ymeri/salary-treemap/app')
emo::ji("poop")
devtools::install_github("hadley/emo")
emo::ji("poop")
emo::ji("poop")
devtools::install_github("hadley/emo")
emo::ji("poop")
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
emo::ji("face")
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
length(unique(df[["department"]]))
df
length(unique(df_app[["Department"]]))
unique(df_app[["Department"]])
runApp('C:/Users/ymeri/salary-treemap/app')
Sys.Date()
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
shiny::runApp('C:/Users/ymeri/salary-treemap/app')
# library
library(treemap)
library(d3treeR)
library(rjson)
library(RSocrata)
library(tools)
library(stringr)
library(dplyr)
library(tidyverse)
library(htmltools)
library(htmlwidgets)
# get and clean data
df_app <- read.socrata("https://data.cityofchicago.org/resource/n4bx-5kf6.json")
cols.num <- c("frequency_description", "annual_salary","hourly_rate")
df_app[cols.num] <- sapply(df_app[cols.num],as.numeric)
df_app$annual_salary <- ifelse(is.na(df_app$annual_salary),
df_app$frequency_description * df_app$hourly_rate * 50,
df_app$annual_salary)
df_app$name <- str_to_title(df_app$name)
df_app$department <- str_to_title(df_app$department)
df_app$job_titles <-gsub('^([0-9]+)|([IVXLCM]+)\\.?$','', df_app$job_titles)
df_app$job_titles <- str_replace_all(df_app$job_titles,
c("DIR" = "DIRECTOR",
"SUPVSR" = "SUPERVISOR",
"MGR" = "MANAGER"))
df_app$job_titles <- str_to_title(df_app$job_titles)
df_app$job_titles <- gsub("\\s*\\([^\\)]+\\)","",as.character(df_app$job_titles))
df_app <- df_app %>% select("name", "department", "job_titles", "annual_salary") %>%
mutate(department=recode(department,
"Admin Hearng" = "Administrative Hearings",
"Animal Contrl" = "Animal Control",
"Budget & Mgmt" = "Budget and Management",
"Copa" = "Civilian Office of Police Accountability",
"Dais" = "Assets, Info, and Services",
"Housing & Econ Dev" = "Planning and Development",
"Inspector Gen" = "Inspector General",
"License Appl Comm" = "License Appeal Commission",
"Oemc" = "Office of Emergency Mgmt and Comm",
"Police" = "Police Department",
"Streets & San" = "Streets and Sanitation",
"Transportn" = "Transportation",
"Water Mgmnt" = "Water Management"
)) %>%
dplyr::rename(
"Name" = name,
"Department" = department,
"Job" = job_titles,
"Salary" = annual_salary
)
df_app <- merge(df_app, count(df_app, Department), by="Department") %>%
arrange(Name)
df_app$deptFreq <- paste0(df_app$Department, " ", paste0("(",df_app$n,")"))
runApp('C:/Users/ymeri/salary-treemap/app')
# library
library(treemap)
library(d3treeR)
library(rjson)
library(RSocrata)
library(tools)
library(stringr)
library(dplyr)
library(tidyverse)
library(htmltools)
library(htmlwidgets)
# get and clean data
df_app <- read.socrata("https://data.cityofchicago.org/resource/n4bx-5kf6.json")
cols.num <- c("frequency_description", "annual_salary","hourly_rate")
df_app[cols.num] <- sapply(df_app[cols.num],as.numeric)
df_app$annual_salary <- ifelse(is.na(df_app$annual_salary),
df_app$frequency_description * df_app$hourly_rate * 50,
df_app$annual_salary)
df_app$name <- str_to_title(df_app$name)
df_app$department <- str_to_title(df_app$department)
df_app$job_titles <-gsub('^([0-9]+)|([IVXLCM]+)\\.?$','', df_app$job_titles)
df_app$job_titles <- str_replace_all(df_app$job_titles,
c("DIR" = "DIRECTOR",
"SUPVSR" = "SUPERVISOR",
"MGR" = "MANAGER"))
df_app$job_titles <- str_to_title(df_app$job_titles)
df_app$job_titles <- gsub("\\s*\\([^\\)]+\\)","",as.character(df_app$job_titles))
df_app <- df_app %>% select("name", "department", "job_titles", "annual_salary") %>%
mutate(department=recode(department,
"Admin Hearng" = "Administrative Hearings",
"Animal Contrl" = "Animal Control",
"Budget & Mgmt" = "Budget and Management",
"Copa" = "Civilian Office of Police Accountability",
"Dais" = "Assets, Info, and Services",
"Housing & Econ Dev" = "Planning and Development",
"Inspector Gen" = "Inspector General",
"License Appl Comm" = "License Appeal Commission",
"Oemc" = "Office of Emergency Mgmt and Comm",
"Police" = "Police Department",
"Streets & San" = "Streets and Sanitation",
"Transportn" = "Transportation",
"Water Mgmnt" = "Water Management"
)) %>%
dplyr::rename(
"Name" = name,
"Department" = department,
"Job" = job_titles,
"Salary" = annual_salary
)
df_app <- merge(df_app, count(df_app, Department), by="Department") %>%
arrange(Name)
df_app$deptFreq <- paste0(df_app$Department, " ", paste0("(",df_app$n,")"))
shiny::runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
# get and clean data
df <- read.socrata("https://data.cityofchicago.org/resource/n4bx-5kf6.json")
cols.num <- c("frequency_description", "annual_salary","hourly_rate")
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
here()
here::here()
getwd()
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
runApp('C:/Users/ymeri/salary-treemap/app')
here::here()
setwd('C:/Users/ymeri/salary-treemap/app')
runApp()
runApp()
here()
here::here()
here::here('style.css')
here::here('salary-treemap', 'app', 'style.css')
here::here('salary-treemap', 'app/style.css')
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
df_app
df_app
df_app[salary < "1000",]
df_app[Salary < "1000",]
df_app[df_app$Salary < "1000",]
df_app[(df_app$Salary < 1000),]
df_app[(df_app$Salary < 100000)]
df_app[(df_app$Salary < 100000),]
df_app[(df_app$Salary > 100000),]
length(df_app[(df_app$Salary > 100000),])
df_app[(df_app$Salary > 100000),]
nrow(df_app[(df_app$Salary > 100000),])
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
format(Sys.Date(), format="%B %d %Y"),".")
Sys.Date()
# library
library(treemap)
library(d3treeR)
library(rjson)
library(RSocrata)
library(tools)
library(stringr)
library(dplyr)
library(tidyverse)
library(htmltools)
library(htmlwidgets)
# get and clean data
df_app <- read.socrata("https://data.cityofchicago.org/resource/n4bx-5kf6.json")
df_date <- Sys.Date()
cols.num <- c("frequency_description", "annual_salary","hourly_rate")
df_app[cols.num] <- sapply(df_app[cols.num],as.numeric)
df_app$annual_salary <- ifelse(is.na(df_app$annual_salary),
df_app$frequency_description * df_app$hourly_rate * 50,
df_app$annual_salary)
df_app$name <- str_to_title(df_app$name)
df_app$department <- str_to_title(df_app$department)
df_app$job_titles <-gsub('^([0-9]+)|([IVXLCM]+)\\.?$','', df_app$job_titles)
df_app$job_titles <- str_replace_all(df_app$job_titles,
c("DIR" = "DIRECTOR",
"SUPVSR" = "SUPERVISOR",
"MGR" = "MANAGER"))
df_app$job_titles <- str_to_title(df_app$job_titles)
df_app$job_titles <- gsub("\\s*\\([^\\)]+\\)","",as.character(df_app$job_titles))
df_app <- df_app %>% select("name", "department", "job_titles", "annual_salary") %>%
mutate(department=recode(department,
"Admin Hearng" = "Administrative Hearings",
"Animal Contrl" = "Animal Control",
"Budget & Mgmt" = "Budget and Management",
"Copa" = "Civilian Office of Police Accountability",
"Dais" = "Assets, Info, and Services",
"Housing & Econ Dev" = "Planning and Development",
"Inspector Gen" = "Inspector General",
"License Appl Comm" = "License Appeal Commission",
"Oemc" = "Office of Emergency Mgmt and Comm",
"Police" = "Police Department",
"Streets & San" = "Streets and Sanitation",
"Transportn" = "Transportation",
"Water Mgmnt" = "Water Management"
)) %>%
dplyr::rename(
"Name" = name,
"Department" = department,
"Job" = job_titles,
"Salary" = annual_salary
)
df_app <- merge(df_app, count(df_app, Department), by="Department") %>%
arrange(Name)
df_app$deptFreq <- paste0(df_app$Department, " ", paste0("(",df_app$n,")"))
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
here::here('salary-treemap', 'ChicagoTreemap.html'
)
runApp()
runApp()
runApp()
runApp('../app_test')
runApp()
runApp()
runApp('../app_test')
runApp('C:/Users/ymeri/salary-treemap/app')
